"use client";

import { useRef } from "react";
import { useGSAP } from "@gsap/react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import cn from "@/lib/utils";

gsap.registerPlugin(useGSAP, ScrollTrigger);

export const DotGridWaterMark = ({ className }: { className?: string }) => {
  const ref = useRef<SVGSVGElement>(null);

  useGSAP(
    () => {
      if (!ref?.current) return;
      const container = ref?.current;

      const paths = gsap.utils.toArray("svg>g>path");

      paths.forEach((path: any) => {
        gsap.fromTo(
          path,
          { scale: 0.5 },
          {
            scale: 1.5,
            yoyo: true,
            delay: Math.random() * (1 - 0.5) + 0.5,
            scrollTrigger: {
              trigger: container,
              start: "top 70%",
            },
          }
        );
      });
    },
    {
      scope: ref,
    }
  );
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width={94}
      height={142}
      viewBox="0 0 94 142"
      fill="none"
      ref={ref}
      className={cn("", className)}
    >
      <g opacity="0.2">
        <path
          d="M8 -6C8 -3.79086 6.20914 -2 4 -2C1.79086 -2 0 -3.79086 0 -6C0 -8.20914 1.79086 -10 4 -10C6.20914 -10 8 -8.20914 8 -6Z"
          fill="#7209B7"
        />
        <path
          d="M8 18C8 20.2091 6.20914 22 4 22C1.79086 22 0 20.2091 0 18C0 15.7909 1.79086 14 4 14C6.20914 14 8 15.7909 8 18Z"
          fill="#7209B7"
        />
        <path
          d="M4 46C6.20914 46 8 44.2091 8 42C8 39.7909 6.20914 38 4 38C1.79086 38 0 39.7909 0 42C0 44.2091 1.79086 46 4 46Z"
          fill="#7209B7"
        />
        <path
          d="M8 66C8 68.2091 6.20914 70 4 70C1.79086 70 0 68.2091 0 66C0 63.7909 1.79086 62 4 62C6.20914 62 8 63.7909 8 66Z"
          fill="#7209B7"
        />
        <path
          d="M4 94C6.20914 94 8 92.2091 8 90C8 87.7909 6.20914 86 4 86C1.79086 86 0 87.7909 0 90C0 92.2091 1.79086 94 4 94Z"
          fill="#7209B7"
        />
        <path
          d="M8 114C8 116.209 6.20914 118 4 118C1.79086 118 0 116.209 0 114C0 111.791 1.79086 110 4 110C6.20914 110 8 111.791 8 114Z"
          fill="#7209B7"
        />
        <path
          d="M4 142C6.20914 142 8 140.209 8 138C8 135.791 6.20914 134 4 134C1.79086 134 0 135.791 0 138C0 140.209 1.79086 142 4 142Z"
          fill="#7209B7"
        />
        <path
          d="M32 -6C32 -3.79086 30.2091 -2 28 -2C25.7909 -2 24 -3.79086 24 -6C24 -8.20914 25.7909 -10 28 -10C30.2091 -10 32 -8.20914 32 -6Z"
          fill="#7209B7"
        />
        <path
          d="M28 22C30.2091 22 32 20.2091 32 18C32 15.7909 30.2091 14 28 14C25.7909 14 24 15.7909 24 18C24 20.2091 25.7909 22 28 22Z"
          fill="#7209B7"
        />
        <path
          d="M32 42C32 44.2091 30.2091 46 28 46C25.7909 46 24 44.2091 24 42C24 39.7909 25.7909 38 28 38C30.2091 38 32 39.7909 32 42Z"
          fill="#7209B7"
        />
        <path
          d="M28 70C30.2091 70 32 68.2091 32 66C32 63.7909 30.2091 62 28 62C25.7909 62 24 63.7909 24 66C24 68.2091 25.7909 70 28 70Z"
          fill="#7209B7"
        />
        <path
          d="M32 90C32 92.2091 30.2091 94 28 94C25.7909 94 24 92.2091 24 90C24 87.7909 25.7909 86 28 86C30.2091 86 32 87.7909 32 90Z"
          fill="#7209B7"
        />
        <path
          d="M28 118C30.2091 118 32 116.209 32 114C32 111.791 30.2091 110 28 110C25.7909 110 24 111.791 24 114C24 116.209 25.7909 118 28 118Z"
          fill="#7209B7"
        />
        <path
          d="M32 138C32 140.209 30.2091 142 28 142C25.7909 142 24 140.209 24 138C24 135.791 25.7909 134 28 134C30.2091 134 32 135.791 32 138Z"
          fill="#7209B7"
        />
        <path
          d="M52 -2C54.2091 -2 56 -3.79086 56 -6C56 -8.20914 54.2091 -10 52 -10C49.7909 -10 48 -8.20914 48 -6C48 -3.79086 49.7909 -2 52 -2Z"
          fill="#7209B7"
        />
        <path
          d="M56 18C56 20.2091 54.2091 22 52 22C49.7909 22 48 20.2091 48 18C48 15.7909 49.7909 14 52 14C54.2091 14 56 15.7909 56 18Z"
          fill="#7209B7"
        />
        <path
          d="M52 46C54.2091 46 56 44.2091 56 42C56 39.7909 54.2091 38 52 38C49.7909 38 48 39.7909 48 42C48 44.2091 49.7909 46 52 46Z"
          fill="#7209B7"
        />
        <path
          d="M56 66C56 68.2091 54.2091 70 52 70C49.7909 70 48 68.2091 48 66C48 63.7909 49.7909 62 52 62C54.2091 62 56 63.7909 56 66Z"
          fill="#7209B7"
        />
        <path
          d="M52 94C54.2091 94 56 92.2091 56 90C56 87.7909 54.2091 86 52 86C49.7909 86 48 87.7909 48 90C48 92.2091 49.7909 94 52 94Z"
          fill="#7209B7"
        />
        <path
          d="M56 114C56 116.209 54.2091 118 52 118C49.7909 118 48 116.209 48 114C48 111.791 49.7909 110 52 110C54.2091 110 56 111.791 56 114Z"
          fill="#7209B7"
        />
        <path
          d="M52 142C54.2091 142 56 140.209 56 138C56 135.791 54.2091 134 52 134C49.7909 134 48 135.791 48 138C48 140.209 49.7909 142 52 142Z"
          fill="#7209B7"
        />
        <path
          d="M80 -6C80 -3.79086 78.2091 -2 76 -2C73.7909 -2 72 -3.79086 72 -6C72 -8.20914 73.7909 -10 76 -10C78.2091 -10 80 -8.20914 80 -6Z"
          fill="#7209B7"
        />
        <path
          d="M76 22C78.2091 22 80 20.2091 80 18C80 15.7909 78.2091 14 76 14C73.7909 14 72 15.7909 72 18C72 20.2091 73.7909 22 76 22Z"
          fill="#7209B7"
        />
        <path
          d="M80 42C80 44.2091 78.2091 46 76 46C73.7909 46 72 44.2091 72 42C72 39.7909 73.7909 38 76 38C78.2091 38 80 39.7909 80 42Z"
          fill="#7209B7"
        />
        <path
          d="M76 70C78.2091 70 80 68.2091 80 66C80 63.7909 78.2091 62 76 62C73.7909 62 72 63.7909 72 66C72 68.2091 73.7909 70 76 70Z"
          fill="#7209B7"
        />
        <path
          d="M80 90C80 92.2091 78.2091 94 76 94C73.7909 94 72 92.2091 72 90C72 87.7909 73.7909 86 76 86C78.2091 86 80 87.7909 80 90Z"
          fill="#7209B7"
        />
        <path
          d="M76 118C78.2091 118 80 116.209 80 114C80 111.791 78.2091 110 76 110C73.7909 110 72 111.791 72 114C72 116.209 73.7909 118 76 118Z"
          fill="#7209B7"
        />
        <path
          d="M80 138C80 140.209 78.2091 142 76 142C73.7909 142 72 140.209 72 138C72 135.791 73.7909 134 76 134C78.2091 134 80 135.791 80 138Z"
          fill="#7209B7"
        />
        <path
          d="M100 -2C102.209 -2 104 -3.79086 104 -6C104 -8.20914 102.209 -10 100 -10C97.7909 -10 96 -8.20914 96 -6C96 -3.79086 97.7909 -2 100 -2Z"
          fill="#7209B7"
        />
        <path
          d="M104 18C104 20.2091 102.209 22 100 22C97.7909 22 96 20.2091 96 18C96 15.7909 97.7909 14 100 14C102.209 14 104 15.7909 104 18Z"
          fill="#7209B7"
        />
        <path
          d="M100 46C102.209 46 104 44.2091 104 42C104 39.7909 102.209 38 100 38C97.7909 38 96 39.7909 96 42C96 44.2091 97.7909 46 100 46Z"
          fill="#7209B7"
        />
        <path
          d="M104 66C104 68.2091 102.209 70 100 70C97.7909 70 96 68.2091 96 66C96 63.7909 97.7909 62 100 62C102.209 62 104 63.7909 104 66Z"
          fill="#7209B7"
        />
        <path
          d="M100 94C102.209 94 104 92.2091 104 90C104 87.7909 102.209 86 100 86C97.7909 86 96 87.7909 96 90C96 92.2091 97.7909 94 100 94Z"
          fill="#7209B7"
        />
        <path
          d="M104 114C104 116.209 102.209 118 100 118C97.7909 118 96 116.209 96 114C96 111.791 97.7909 110 100 110C102.209 110 104 111.791 104 114Z"
          fill="#7209B7"
        />
        <path
          d="M100 142C102.209 142 104 140.209 104 138C104 135.791 102.209 134 100 134C97.7909 134 96 135.791 96 138C96 140.209 97.7909 142 100 142Z"
          fill="#7209B7"
        />
      </g>
    </svg>
  );
};
